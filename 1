docker compose exec backend python -c "
import asyncio
from app.database import async_session_maker, init_db
from app.models.user import User
from sqlalchemy import select, func

async def check():
    await init_db()
    async with async_session_maker() as db:
          # Всего юзеров
        total = await db.execute(select(func.count(User.id)))
        total_count = total.scalar()
          
          # С NULL expires_at
        null_expires = await db.execute(
            select(func.count(User.id)).where(User.subscription_expires_at.is_(None))
        )
        null_count = null_expires.scalar()
          
          # С автопродлением но без expires_at
        auto_no_expires = await db.execute(
            select(func.count(User.id)).where(
                User.auto_renew_enabled == True,
                User.subscription_expires_at.is_(None)
            )
        )
        auto_no_expires_count = auto_no_expires.scalar()
          
        print(f'Всего юзеров: {total_count}')
        print(f'subscription_expires_at = NULL: {null_count}')
        print(f'auto_renew=True но expires_at=NULL: {auto_no_expires_count}')

asyncio.run(check())
"